<section class="section order__listing buyer--listing bg-blue admin--listing">
  <div class="jakay-container">
    <div class="d-flex justify-content-between align-items-center section-header">
      <div>
        <h3 class="mb-3 font-38 text-primary fw-semibold">{{ 'My Sales' | translate }}</h3>
        <p class="mb-3 font-14 text-primary">
          {{ 'Es importante revisar el curso o estatus de tu orden de venta  y el resumen de todos los detalles para tener una venta m√°s efectiva con el comprador.' | translate }}
        </p>
      </div>
    </div>
    <div class="condition-tabs">
      <div class="form-group">
        <div class="tabs-list br-12">
          <ul class="nav nav-pills" id="Condition-tab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="Condition-all-tab" [ngClass]="{ active: selectedTab == 'in_progress' }"
                (click)="selectTab('in_progress')" data-bs-toggle="pill" type="button" role="tab"
                aria-controls="Condition-all" aria-selected="true">
                {{ 'In Progress' | translate }}
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="Condition-approval-tab" [ngClass]="{ active: selectedTab == 'past' }"
                (click)="selectTab('past')" data-bs-toggle="pill" type="button" role="tab"
                aria-controls="Condition-approval" aria-selected="false">
                {{ 'Past' | translate }}
              </button>
            </li>
          </ul>
        </div>
      </div>
      <div class="order__listing--cards buyer-cards">
        <div class="tab-content pb-5" id="Condition-tabContent">
          <div class="tab-pane fade show active" id="Condition-all" role="tabpanel" aria-labelledby="Condition-all-tab">
            <div class="table-responsive admin--listing-table bg-white br-12 p-3">
              <table class="table mb-0 p-1">
                <thead>
                  <th (click)="setSorting('id')">
                    <span>
                      {{ 'Order ID' | translate }}
                      <img src="../../../../../assets/images/sorting-arrow.svg" class="ms-2" />
                    </span>
                  </th>
                  <th><span>{{ 'Image' | translate }}</span></th>
                  <th (click)="setSorting('vehicle')">
                    <span>
                      {{ 'Vehicle' | translate }}
                      <img src="../../../../../assets/images/sorting-arrow.svg" class="ms-2" />
                    </span>
                  </th>
                  <th (click)="setSorting('location')">
                    <span>
                      {{ 'Location' | translate }}
                      <img src="../../../../../assets/images/sorting-arrow.svg" class="ms-2" />
                    </span>
                  </th>
                  <th>
                    <span>{{ 'Order Date' | translate }}
                    </span>
                  </th>
                  <th>
                    <span>
                      {{ 'Total Amount' | translate }}
                    </span>
                  </th>
                  <th><span>{{ 'Order Status' | translate }}</span></th>
                  <th><span>{{ 'Actions' | translate }}</span></th>
                </thead>
                <tbody>
                  <ng-container *ngIf="!loading; else loadingTemplate">
                    <ng-container *ngIf="orderList.length > 0; else noRecordsTemplate">
                      <tr *ngFor="let order of orderList">
                        <td>{{ order.id.slice(0,6) | uppercase }}</td>
                        <td>
                          <div class="small-img-list">
                            <ng-container *ngIf="order.vehicle.cover_img">
                              <img [src]="order.vehicle.cover_img" />
                            </ng-container>
                            <ng-container *ngIf="!order.vehicle.cover_img">
                              <img src="assets/images/no_preview.jpeg" />
                            </ng-container>
                          </div>
                        </td>
                        <td>
                          {{ order.vehicle.make | uppercase }},
                          {{ order.vehicle.model | uppercase }},
                          {{ order.vehicle.year }}
                        </td>
                        <td>
                          {{ order.vehicle.location.province | titlecase }}
                        </td>
                        <td>{{ order.created_at | date : "dd-MMM-YYYY" }}</td>
                        <td>$ {{ order.total_amount | spanishNumber }}</td>
                        <td>
                          <label class="pending-approval"
                            *ngIf="order.status != 'cancelled' && order.status != 'confirmed' && order.status != 'rejected'">{{ 'In Progress' | translate }}</label>
                          <label class="rejected" *ngIf="order.status == 'cancelled' || order.status == 'rejected' ">{{ 'Canceled' | translate }}</label>
                          <label class="approved" *ngIf="order.status == 'confirmed'">{{ 'Complete' | translate }}</label>
                        </td>
                        <td class="action-class">
                          <a routerLink="/user/seller-orders/order-details/{{
                              order.id
                            }}">
                            <img src="assets/images/eye-open.svg" /></a>
                        </td>
                      </tr>
                    </ng-container>
                    <ng-template #noRecordsTemplate>
                      <tr class="text-center">
                        <td colspan="14">{{ 'No records found' | translate }}</td>
                      </tr>
                    </ng-template>
                  </ng-container>
                  <ng-template #loadingTemplate>
                    <tr class="text-center">
                      <td colspan="14">
                        <app-loader></app-loader>
                      </td>
                    </tr>
                  </ng-template>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <pagination *ngIf="paginationData?.total_pages && !loading" [paginationData]="paginationData"
          (selectedPage)="jumpToThePage($event)">
        </pagination>
      </div>
    </div>
  </div>
</section>
