<section class="section--spacing admin_add__user bg-blue">
  <div class="jakay-container" *ngIf="vehicleDetails">
    <ng-container>
      <div class="back-to-page c-pointer d-flex">
        <span (click)="back()"><img src="assets/images/backarrow.svg" /></span>
        <div class="ms-3 section-header">
          <h3 class="mb-3 font-38 text-primary fw-bold">
            {{ "Loan Application" | translate }}
          </h3>
          <p class="text-primary font-14 fw-regular">
            {{
              "Adjust your Initial entry and your payment time in months according to your income and expenses, it will allow you to budget and apply your purchase"
                | translate
            }}
          </p>
        </div>
      </div>
      <form [formGroup]="preApprovalForm">
        <div class="row justify-content-between">
          <div class="col-sm-12 col-md-7" *ngIf="vehicleDetails">
            <div class="bg-white p-3 p-md-4 br-12 mb-5" style="box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
              <div class="row">

                <!-- title start -->
                <!-- <div class="col-12">
                  <div class="row align-items-center mb-3">
                    <div class="col-ms-12">
                      <h3 class="mb-2 mb-xl-3 font-24 d-block">
                        {{ "Vehicle Information" | translate }}
                      </h3>
                    </div>
                  </div>
                </div> -->
                <!-- title end -->

                <div class="col-lg-4 col-sm-6 col-12 d-flex">
                  <img src="assets/images/tag.svg" alt="Tag" class="align-self-start me-4">
                  <div class="form-group">
                    <label class="text-primary font-14 d-block mb-2 fw-medium">{{
                      "Make" | translate
                    }}</label>
                    <p class="text-primary font-16 mb-0 la-text">
                      {{ vehicleDetails.make }}
                    </p>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-6 col-12 d-flex">
                  <img src="assets/images/shaded-car.svg" alt="Car" class="align-self-start me-4">
                  <div class="form-group">
                    <label class="text-primary font-14 d-block mb-2 fw-medium">{{
                      "Model" | translate
                    }}</label>
                    <p class="text-primary font-16 mb-0 la-text fw-bold">
                      {{ vehicleDetails.make_model }}
                    </p>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-6 col-12 d-flex">
                  <img src="assets/images/cal-preord.svg" alt="Tag" class="align-self-start me-4">
                  <div class="form-group">
                    <label class="text-primary font-14 d-block mb-2 fw-medium">{{
                      "Year" | translate
                    }}</label>
                    <p class="text-primary font-16 mb-0 la-text fw-bold">
                      {{ vehicleDetails.model_year }}
                    </p>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-6 col-12 d-flex">
                  <img src="assets/images/clasic-car.svg" alt="Tag" class="align-self-start me-4">
                  <div class="form-group">
                    <label class="text-primary font-14 d-block mb-2 fw-medium">{{
                      "Body Type" | translate
                    }}</label>
                    <p class="text-primary font-16 mb-0 la-text fw-bold">
                      {{ vehicleDetails.body_type }}
                    </p>
                  </div>
                </div>
                <div
                  class="col-lg-4 col-sm-6 col-12 d-flex"
                  *ngIf="vehicleDetails.number_plate"
                >
                  <img src="assets/images/plate.svg" alt="Tag" class="align-self-start me-4">
                  <div class="form-group">
                    <label class="text-primary font-14 d-block mb-2 fw-medium">{{
                      "Number Plate" | translate
                    }}</label>
                    <p class="text-primary font-16 mb-0 la-text fw-bold">
                      {{ vehicleDetails.number_plate }}
                    </p>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-6 col-12 d-flex">
                  <img src="assets/images/moneybag.svg" alt="Tag" class="align-self-start me-4">
                  <div class="form-group">
                    <label class="text-primary font-14 d-block mb-2 fw-medium"
                      >{{ "Price" | translate }} $</label
                    >
                    <p class="text-primary font-16 mb-0 la-text fw-bold ">
                      ${{ vehicleDetails.price | spanishNumber }}
                    </p>
                  </div>
                </div>
                <div class="col-lg-12 col-md-12 col-12 ">
                  <div class="form-group">
                    <label class="text-primary font-14 d-block mb-2 fw-medium">{{
                      "Images" | translate
                    }}</label>
                    <div class="d-flex">
                      <div
                        class="vehicle-image-wrp me-2"
                        *ngIf="vehicleDetails.cover_img_url"
                      >
                        <img
                          [src]="vehicleDetails.cover_img_url.url"
                          height="100%"
                        />
                      </div>
                      <div
                        class="vehicle-image-wrp me-2"
                        *ngFor="let image of vehicleDetails.other_img_urls"
                      >
                        <img [src]="image.url" width="100%" height="100%" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-5">
            <div class="row">
              <div class="col-6 col-md-3" *ngIf="vehicleDetails">
                <div class="form-group">
                  <label
                    class="fw-medium text-primary font-14 d-block mb-2"
                    >{{ "Vehicle Price" | translate }}</label
                  >
                  <p class="text-secondary font-16 mb-0 price fw-medium">
                    ${{ vehicleDetails.price | spanishNumber }}
                  </p>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="form-group">
                  <label
                    class="fw-medium text-primary font-14 d-block mb-2"
                    >{{ "Down Payment" | translate }}</label
                  >
                  <p class="text-secondary font-16 mb-0 price fw-medium">
                    ${{ depositAmount | spanishNumber }}
                  </p>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="form-group">
                  <label
                    class="fw-medium text-primary font-14 d-block mb-2"
                    >{{ "Monthly Amount" | translate }}</label
                  >
                  <p class="text-secondary font-16 mb-0 price fw-medium">
                    ${{ monthlyEMIValue | spanishNumber }}
                  </p>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="form-group">
                  <label
                    class="fw-medium text-primary font-14 d-block mb-2"
                    >{{ "Loan Amount" | translate }}</label
                  >
                  <p class="text-secondary font-16 mb-0 price fw-medium">
                    ${{ loanAmount | spanishNumber }}
                  </p>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="form-group">
                  <p class="text-primary mb-0 font-20">
                    {{ "Down Payment" | translate }}
                  </p>
                  <div class="loan-range-slider1">
                    <div class="mt-4 custom-slider1">
                      <ngx-slider
                        [options]="depositeOptions"
                        (valueChange)="calculateEMI($event, 'deposit')"
                      ></ngx-slider>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="form-group">
                  <p class="text-primary mb-0 font-20">
                    {{ "Term (Months)" | translate }}
                  </p>
                  <div class="loan-range-slider1">
                    <div class="mt-4 custom-slider1">
                      <ngx-slider
                        [options]="emiMonthOptions"
                        (valueChange)="calculateEMI($event, 'emi_months')"
                      ></ngx-slider>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <h1 class="text-primary fw-bold pb-3" style="margin-top: -24px;">Detalle de Ingresos</h1>

        <div class="details-card bg-white px-3 pt-3 pb-4">
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label class="text-primary font-14 d-block mb-2 fw-medium">{{
                  "Cedula Id" | translate
                }}</label>
                <div class="position-relative">
                  <input
                    type="text"
                    class="form-control icome-details-input"
                    maxlength="10"
                    minlength="10"
                    formControlName="cedula_id"
                    (blur)="validateCedulaId($event)"
                    OnlyNumber
                  />
                  <img
                    src="assets/images/dni.svg"
                    alt="Dni"
                    class="icon ms-3"
                  >
                </div>
                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls.cedula_id.errors?.required
                  "
                  class="invalid-feedback"
                >
                  {{ "Cedula Id is required" | translate }}
                </div>
                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls.cedula_id.errors?.minlength
                  "
                  class="invalid-feedback"
                >
                  {{ "Cedula Id must contain 10 digits" | translate }}
                </div>
                <div *ngIf="!isValidCedula" class="invalid-feedback">
                  {{ "Invalid Cedula Id" | translate }}
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <div class="d-flex justify-content-between">
                  <label class="text-primary font-14 mb-2 fw-medium">{{
                    "Select Loan Type" | translate
                  }}</label>
                  <!-- <button class="mb-1" data-bs-placement="right">
                    <span class="font-12 text-align-left text-underline reference-link">
                    </span>
                  </button> -->
                </div>
                <div
                  ngbDropdown
                  class="doropdown_radio dropdown-assets/images"
                  [autoClose]="true"
                >
                  <button
                    ngbDropdownToggle
                    class="btn btn-white dropdown-toggle btn-dropdown font-14 fw-regular custom-dropdown-toggle"
                    [ngClass]="{
                      'text-primary': preApprovalForm.controls['loan_type'].value
                    }"
                    type="button"
                    id="loan-type"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <img src="assets/images/fee-type.svg" alt="Fee type" class="me-2">
                    {{
                      preApprovalForm.controls["loan_type"].value
                        ? preApprovalForm.controls["loan_type"].value ==
                          "readjustable"
                          ? ("Re-Adjustable" | translate)
                          : (preApprovalForm.controls["loan_type"].value
                            | titlecase
                            | translate)
                        : ("Loan Type" | translate)
                    }}
                  </button>
                  <ul
                    ngbDropdownMenu
                    class="dropdown-menu vehicle-type-menu vehicle-dropdown-menu br-12 px-3 w-100"
                  >
                    <ng-container *ngFor="let loan of loanTypes; index as i">
                      <li
                        *ngIf="
                          loan != 'readjustable' ||
                          (loan == 'readjustable' &&
                            vehicleDetails.vehicle_type !=
                              vehicleTypes.Automobiles)
                        "
                      >
                        <a
                          ngbDropdownItem
                          class="dropdown-item"
                          href="javascript:void(0)"
                        >
                          <div class="radio-check checkbox-check br-12 me-3">
                            <div class="form-check form-check-inline">
                              <input
                                class="form-check-input"
                                type="radio"
                                name="location"
                                id="loan_{{ i }}"
                                [value]="loan"
                                [checked]="
                                  preApprovalForm.controls['loan_type'].value ==
                                  loan
                                "
                                (change)="setLoanType(loan)"
                              />
                              <label
                                class="form-check-label"
                                for="loan_{{ i }}"
                                >{{
                                  loan == "readjustable"
                                    ? ("Re-Adjustable" | translate)
                                    : (loan | titlecase | translate)
                                }}</label
                              >
                              <span class="dot-checkmark"></span>
                            </div>
                          </div>
                        </a>
                      </li>
                    </ng-container>
                  </ul>
                </div>
                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls?.loan_type.errors?.required
                  "
                  class="invalid-feedback"
                >
                  {{ "Loan Type is required" | translate }}
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label class="text-primary font-14 d-block mb-2 fw-medium">{{
                  "Marital Status" | translate
                }}</label>
                <div
                  ngbDropdown
                  class="doropdown_radio dropdown-assets/images"
                  [autoClose]="true"
                >
                  <button
                    ngbDropdownToggle
                    class="dropdown-toggle btn btn-white btn-dropdown font-14 fw-regular custom-dropdown-toggle"
                    [ngClass]="{ 'text-primary': selectedStatus }"
                    type="button"
                    id="loan-type"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <!-- <img src="assets/images/civil-status.svg" alt="Civil status" class="me-2"> -->

                    <div [ngSwitch]="selectedStatus" style="display: inline-block;">
                      <ng-container *ngSwitchCase="'Single'">
                        <img src="assets/images/civil-status/single.svg" alt="Single" class="me-2">
                      </ng-container>
                      <ng-container *ngSwitchCase="'Married'">
                        <img src="assets/images/civil-status.svg" alt="Married" class="me-2">
                      </ng-container>
                      <ng-container *ngSwitchCase="'Widow/Widower'">
                        <img src="assets/images/civil-status/widow.svg" alt="Widow or widower" class="me-2">
                      </ng-container>
                      <ng-container *ngSwitchCase="'Divorce'">
                        <img src="assets/images/civil-status/divorce.svg" alt="Divorce" class="me-2">
                      </ng-container>
                      <ng-container *ngSwitchDefault>
                        <img src="assets/images/civil-status/separated-icon.svg" alt="Separated" class="me-2">
                      </ng-container>
                    </div>

                    {{
                      selectedStatus
                      ? (selectedStatus | translate)
                      : ("Marital Status" | translate)
                    }}
                  </button>
                  <ul
                    ngbDropdownMenu
                    class="dropdown-menu vehicle-type-menu vehicle-dropdown-menu br-12 px-3 w-100"
                  >
                    <ng-container
                      *ngFor="let maritalStatus of maritalOptions; index as i"
                    >
                      <li>
                        <a
                          ngbDropdownItem
                          class="dropdown-item"
                          href="javascript:void(0)"
                        >
                          <div class="radio-check checkbox-check br-12 me-3">
                            <div class="form-check form-check-inline">
                              <input
                                class="form-check-input"
                                type="radio"
                                name="location"
                                id="status_{{ i }}"
                                (change)="
                                  selectedStatus = maritalStatus.value;
                                  setMaritalStatus(maritalStatus.id)
                                "
                                [value]="maritalStatus.id"
                              />
                              <label
                                class="form-check-label"
                                for="status_{{ i }}"
                              >
                                {{ maritalStatus.value | translate }}</label
                              >
                              <span class="dot-checkmark"></span>
                            </div>
                          </div>
                        </a>
                      </li>
                    </ng-container>
                  </ul>
                </div>
                <div
                  *ngIf="formSubmittted && !selectedStatus"
                  class="invalid-feedback"
                >
                  {{ "Marital status is required" | translate }}
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label class="text-primary font-14 d-block mb-2 fw-medium"
                  >{{ "Total Monthly Income" | translate }}
                  <!-- <img
                    class="info-icon"
                    src="assets/images/info-light.svg"
                    placement="end"
                    ngbTooltip=""
                  /> -->
                </label>
                <!-- <input type="text" class="form-control" TwoDigitDecimaNumber formControlName="total_household_income"> -->
                <div class="text">
                  <input
                    type="text"
                    class="form-control"
                    style="padding-left: 3.438rem;"
                    PriceDirective
                    minlength="1"
                    maxlength="14"
                    (blur)="formatPrice($event, 'total_household_income')"
                    (focus)="formatToNumber($event, 'total_household_income')"
                    formControlName="total_household_income"
                  />
                </div>
                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls?.total_household_income.errors
                      ?.required
                  "
                  class="invalid-feedback"
                >
                  {{ "Total Monthly Income is required" | translate }}
                </div>
                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls?.total_household_income.errors
                      ?.minlength
                  "
                  class="invalid-feedback"
                >
                  {{
                    "Total Monthly Income must contain at least one digit."
                      | translate
                  }}
                </div>
                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls?.total_household_income.errors
                      ?.maxlength
                  "
                  class="invalid-feedback"
                >
                  {{
                    "Total Monthly Income must not contain more than 11 digits."
                      | translate
                  }}
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label class="text-primary font-14 d-block mb-2 fw-medium"
                  >{{ "Total Monthly Expense" | translate }}
                  <!-- <img
                    class="info-icon"
                    src="assets/images/info-light.svg"
                    placement="end"
                    ngbTooltip=""
                  /> -->
                </label>
                <!-- <input type="text" class="form-control" TwoDigitDecimaNumber formControlName="total_household_expenses"> -->
                <div class="text">
                  <input
                    type="text"
                    class="form-control"
                    style="padding-left: 3.438rem;"
                    PriceDirective
                    minlength="1"
                    maxlength="14"
                    (blur)="formatPrice($event, 'total_household_expenses')"
                    (focus)="formatToNumber($event, 'total_household_expenses')"
                    formControlName="total_household_expenses"
                  />
                </div>

                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls?.total_household_expenses.errors
                      ?.required
                  "
                  class="invalid-feedback"
                >
                  {{ "Total Monthly Expense is required" | translate }}
                </div>
                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls?.total_household_expenses.errors
                      ?.minlength
                  "
                  class="invalid-feedback"
                >
                  {{
                    "Total Monthly Expense must contain at least one digit."
                      | translate
                  }}
                </div>
                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls?.total_household_expenses.errors
                      ?.maxlength
                  "
                  class="invalid-feedback"
                >
                  {{
                    "Total Monthly Expense must not contain more than 11 digits."
                      | translate
                  }}
                </div>
              </div>
            </div>
          </div>
        </div>

        <ng-container *ngIf="vehicleDetails?.vehicle_type != 'Automobiles'">
          <div class="row mb-4">
            <div class="col-sm-12 col-md-6 col-lg-6">

              <div class="form-check d-none">
                <input
                  type="checkbox"
                  class="form-check-input form-check-label"
                  formControlName="is_grace_period"
                  id="grace_period_check"
                />
                <label
                  class="text-primary font-14 d-block mb-2 form-check-label fw-medium"
                  for="grace_period_check"
                  >{{ "Continue with Grace Period" | translate }}</label
                >
                <p
                  class="text-primary-light font-12 d-block mb-2 form-check-label"
                >
                  {{
                    "Selecting grace period will defer your  monthly payment for 3 months!"
                      | translate
                  }}
                </p>
              </div>

              <p class="pt-3 pb-2">
                <a class="font-18 plus-jakarta link-opacity-75-hover h1 text-primary" href="#" (click)="selectCheckbox($event)" style="text-decoration-line: underline; text-decoration-thickness: 2px;">
                  <!-- {{ "Continue with Grace Period" | translate }} -->
                  Continuar con el Período de Gracia
                </a>
              </p>
              <p
                  class="text-primary font-14 d-block mb-2 form-check-label fw-medium"
                >
                  {{
                    "Selecting grace period will defer your  monthly payment for 3 months!"
                      | translate
                  }}
              </p>

            </div>
          </div>
          <div
            class="row"
            *ngIf="preApprovalFormControls?.is_grace_period.value === true"
          >
            <div class="col-sm-12 col-md-4 col-lg-4">
              <div class="form-group">
                <label class="text-primary font-14 d-block mb-2 fw-medium">{{
                  "Grace Period" | translate
                }}</label>
                <div
                  ngbDropdown
                  class="doropdown_radio dropdown-assets/images"
                  [autoClose]="true"
                >
                  <button
                    ngbDropdownToggle
                    class="btn btn-white dropdown-toggle btn-dropdown btn-loan-type w-100 custom-dropdown-toggle"
                    type="button"
                    id="loan-type"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    {{
                      preApprovalFormControls?.grace_period.value
                        ? preApprovalFormControls?.grace_period.value == 1? preApprovalFormControls?.grace_period.value +' '+ ("month" | translate) : preApprovalFormControls?.grace_period.value +' '+ ("months" | translate)
                        : ("Grace  Period" | translate)
                    }}
                  </button>
                  <ul
                    ngbDropdownMenu
                    class="dropdown-menu vehicle-type-menu vehicle-dropdown-menu br-12 px-3"
                  >
                    <li>
                      <a
                        ngbDropdownItem
                        class="dropdown-item"
                        href="javascript:void(0)"
                      >
                        <div class="radio-check checkbox-check br-12 me-3">
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="grace_period"
                              id="grace_1"
                              [value]="1"
                              [checked]="
                                preApprovalFormControls?.grace_period.value == 1
                              "
                              (change)="setGracePeriod(1)"
                            />
                            <label class="form-check-label" for="grace_1"
                              >1 {{"month" | translate}}</label
                            >
                            <span class="dot-checkmark"></span>
                          </div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a
                        ngbDropdownItem
                        class="dropdown-item"
                        href="javascript:void(0)"
                      >
                        <div class="radio-check checkbox-check br-12 me-3">
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="grace_period"
                              id="grace_2"
                              [value]="2"
                              [checked]="
                                preApprovalFormControls?.grace_period.value == 2
                              "
                              (change)="setGracePeriod(2)"
                            />
                            <label class="form-check-label" for="grace_2"
                              >2 {{"months" | translate}}</label
                            >
                            <span class="dot-checkmark"></span>
                          </div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a
                        ngbDropdownItem
                        class="dropdown-item"
                        href="javascript:void(0)"
                      >
                        <div class="radio-check checkbox-check br-12 me-3">
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="grace_period"
                              id="grace_3"
                              [value]="3"
                              [checked]="
                                preApprovalFormControls?.grace_period.value == 3
                              "
                              (change)="setGracePeriod(3)"
                            />
                            <label class="form-check-label" for="grace_3"
                              >3 {{"months" | translate}}</label
                            >
                            <span class="dot-checkmark"></span>
                          </div>
                        </div>
                      </a>
                    </li>
                  </ul>
                </div>
                <div
                  *ngIf="
                    formSubmittted &&
                    preApprovalFormControls?.is_grace_period.value === true &&
                    !preApprovalFormControls?.grace_period.value
                  "
                  class="invalid-feedback"
                >
                  {{ "Grace Period is required" | translate }}
                </div>
              </div>
            </div>
          </div>
        </ng-container>

        <div class="d-sm-flex mt-4">
          <button
            class="btn btn-sm primary-btn-outline btn--small mt-3 mt-sm-0 border-1 fw-semibold"
            (click)="back()"
          >
            {{ "Cancel" | translate }}
          </button>
          <button
            class="btn btn-sm primary-btn btn--small ms-sm-3 border-1 mt-3 mt-sm-0 fw-semibold"
            [disabled]="loading"
            (click)="submitPreApproval()"
          >
            <span
              *ngIf="loading"
              class="spinner-border spinner-border-sm"
              role="status"
              aria-hidden="true"
            ></span>
            {{ "Get Pre-Approved" | translate }}
          </button>
        </div>
      </form>
    </ng-container>
    <ng-template #loader>
      <app-loader></app-loader>
    </ng-template>
  </div>
</section>

<ng-template #verifyCedulaModal>
  <div class="modal-header position-relative border-0">
    <button
      type="button"
      class="btn-close p-4"
      (click)="modalRef.dismiss('Cross click')"
      aria-label="Close"
    ></button>
  </div>
  <div class="modal-body border-0">
    <h3 class="modal-title text-center w-100 text-primary fw-semibold mb-3">
      {{ "Verify Cedula ID" | translate }}
    </h3>
    <p
      class="text-primary-light text-center fw-regular font-14 mb-0 edit-number d-block"
    >
      {{ "Enter OTP received on registered mobile no" | translate }} or
      {{ "Email" | translate }}
      <!-- <span>lka**@****</span> -->
      {{ "with your Cedula Id" | translate }}
    </p>
    <div class="row justify-content-center">
      <div class="col-xl-7 col-lg-9">
        <form>
          <div class="mobile-verification-form mt-4 pt-2">
            <div class="row">
              <div class="col-md-12 d-inline-flex justify-content-center">
                <div class="form-group">
                  <ng-otp-input
                    (onInputChange)="onOtpChange($event)"
                    [config]="config"
                  ></ng-otp-input>
                </div>
              </div>
            </div>
            <!-- <div class="d-flex justify-content-center mb-3">
                <p class="font-14 text-primary-light fw-regular">
                  00:{{ secondsConter > 9 ? secondsConter : "0" + secondsConter }}
                </p>
              </div>
              <div class="d-flex justify-content-center mb-4">
                <p class="font-14 text-primary-light fw-regular">
                  Didn't receive OTP?
                  <a
                    (click)="resendVerificationCode()"
                    *ngIf="!disabledResendButton"
                    class="forgot-link text-secondary fw-regular"
                    >RESEND</a
                  >
                </p>
              </div>-->
            <div
              class="next-button d-flex justify-content-center flex-wrap mt-2"
            >
              <button
                class="btn primary-btn btn-lg next-btn w-100"
                [disabled]="loading"
                (click)="verifyCedulaId()"
              >
                <span
                  *ngIf="loading"
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
                ></span>
                {{ "Verify" | translate }}
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #preApprovalSuccessModal>
  <div class="modal-header position-relative border-0 pb-0 px-4 pt-3">
    <button
      type="button"
      class="btn-close p-4 custom-close-btn"
      (click)="modalRef.dismiss('Cross click')"
      aria-label="Close"
    ></button>
  </div>
  <div class="modal-body border-0 pt-0">
    <div class="d-flex justify-content-center border-3">
      <img src="assets/images/successfully.svg" alt="Success icon">
    </div>
    <h3 class="modal-title text-center w-100 text-primary fw-bold mb-3 font-48 pt-1">
      {{ "Congratulations" | translate }}
    </h3>
    <p
      class="text-primary text-center fw-medium font-20 mb-0 edit-number d-block pb-4"
    >
      {{ "You have been pre-approved for this vehicle." | translate }}
    </p>
    <div class="row justify-content-center">
      <div class="btn-grp mt-3 mb-3 d-flex justify-content-center">
        <button
          class="btn primary-btn next-btn font-16 fw-semibold complete-loan-btn custom-shadow"
          (click)="completeApplication()"
        >
          {{ "Complete Loan Application" | translate }}
        </button>
        <!-- <button class="btn primary-btn-outline btn-lg ms-3" disabled>
          I'm Still Thinking
        </button> -->
      </div>
    </div>
  </div>
</ng-template>

<ng-template #rejectionModal>
  <div class="modal-header position-relative border-0">
    <button
      type="button"
      class="btn-close p-4"
      (click)="modalRef.dismiss('Cross click')"
      aria-label="Close"
    ></button>
  </div>
  <div class="modal-body border-0">
    <h3 class="modal-title text-center w-100 text-primary fw-semibold mb-3">
      {{ "Sorry" | translate }}
    </h3>
    <p
      class="text-primary-light text-center fw-regular font-14 mb-0 edit-number d-block"
    >
      {{
        "You're not eligible for loan. Still you can purchase it without"
          | translate
      }}
      <br />
      {{ "Loan" | translate }}.
    </p>
    <div class="row justify-content-center mt-2">
      <div class="next-button d-flex justify-content-center flex-wrap mt-2">
        <button
          class="btn primary-btn btn-lg next-btn w-100"
          (click)="buyNow()"
        >
          <span
            *ngIf="loading"
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
          ></span
          >{{ "Purchase without Loan" | translate }}
        </button>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #rejectionModal>
  <div class="modal-header position-relative border-0">
    <button
      type="button"
      class="btn-close p-4"
      (click)="modalRef.dismiss('Cross click')"
      aria-label="Close"
    ></button>
  </div>
  <div class="modal-body border-0">
    <h3 class="modal-title text-center w-100 text-primary fw-semibold mb-3">
      {{ "Sorry" | translate }}
    </h3>
    <p
      class="text-primary-light text-center fw-regular font-14 mb-0 edit-number d-block"
    >
      {{
        "You're not eligible for loan. Still you can purchase it without"
          | translate
      }}
      <br />
      {{ "Loan" | translate }}.
    </p>
    <div class="row justify-content-center mt-2">
      <div class="next-button d-flex justify-content-center flex-wrap mt-2">
        <button
          class="btn primary-btn btn-lg next-btn w-100"
          (click)="buyNow()"
        >
          <span
            *ngIf="loading"
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
          ></span
          >{{ "Purchase without Loan" | translate }}
        </button>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #notApplicable>
  <div class="modal-header position-relative border-0">
    <button
      type="button"
      class="btn-close p-4"
      (click)="modalRef.dismiss('Cross click')"
      aria-label="Close"
    ></button>
  </div>
  <div class="modal-body border-0">
    <h3 class="modal-title text-center w-100 text-primary fw-semibold mb-3">
      {{ "Sorry" | translate }}
    </h3>
    <p
      class="text-primary-light text-center fw-regular font-14 mb-0 edit-number d-block"
    >
      {{
        "You're not eligible for loan, Monthly amount is more than monthly saving"
          | translate
      }}.
    </p>
    <div class="row justify-content-center mt-2">
      <div class="next-button d-flex justify-content-center flex-wrap mt-2">
        <button
          class="btn primary-btn btn-lg next-btn w-100"
          (click)="contactAdmin()"
        >
          {{ "Contact Admin" | translate }}
        </button>
      </div>
    </div>
  </div>
</ng-template>
